# 陶瓷文化模块使用说明

## 📋 完成内容

### ✅ 后端实现
1. **CeramicContentMapper.java** - 数据访问层
   - 基础CRUD操作（继承MyBatis Plus）
   - 自定义增加浏览量方法

2. **CeramicContentService.java** - 服务接口
   - 分页查询陶瓷文化内容列表
   - 根据ID查询详情
   - 增加浏览量
   - 获取分类统计信息

3. **CeramicContentServiceImpl.java** - 服务实现类
   - 完整业务逻辑实现
   - 支持分类筛选
   - 自动按排序字段和创建时间排序

4. **CeramicContentController.java** - 控制器
   - `GET /api/ceramic/list` - 分页查询列表（支持分类筛选）
   - `GET /api/ceramic/{id}` - 查询详情
   - `POST /api/ceramic/{id}/view` - 增加浏览量
   - `GET /api/ceramic/categories` - 获取分类统计

### ✅ 前端实现
1. **api/ceramic.js** - API接口封装
   - getCeramicContentList() - 获取列表
   - getCeramicContentById() - 获取详情
   - incrementCeramicViews() - 增加浏览量
   - getCeramicCategories() - 获取分类统计

2. **Ceramic.vue** - 页面改造
   - 替换模拟数据为真实API调用
   - 实现自动增加浏览量（点击详情时）
   - 完整的分页和分类筛选功能

### ✅ 测试数据
- 创建了10条丰富的测试数据
- 涵盖4个分类：陶瓷历史、制作工艺、陶瓷名家、文化传承
- 包含标题、摘要、详细内容、图片、作者等完整信息

---

## 🚀 部署步骤

### 1. 导入测试数据

打开MySQL客户端或命令行，执行测试数据脚本：

```bash
mysql -u root -p jingdezhen_tourism < backend/src/main/resources/ceramic_content_test_data.sql
```

或者在MySQL客户端中直接执行文件内容。

**验证数据导入：**
```sql
USE jingdezhen_tourism;
SELECT id, category, title, author, views, status FROM ceramic_content ORDER BY sort_order;
```

应该看到10条记录。

### 2. 启动后端服务

```bash
cd backend
mvn spring-boot:run
```

或者在IDEA中运行`TourismApplication.java`主类。

**验证后端服务：**
- 访问：http://localhost:8080/api/ceramic/list
- 应该返回陶瓷文化内容列表的JSON数据

### 3. 启动前端服务

```bash
cd frontend
npm install  # 如果还没安装依赖
npm run dev
```

### 4. 测试功能

访问：http://localhost:5173/ceramic

**测试项目：**
- ✅ 页面加载显示10条数据（分3页）
- ✅ 分类筛选（全部、陶瓷历史、制作工艺、陶瓷名家、文化传承）
- ✅ 点击内容卡片查看详情
- ✅ 查看详情后浏览量+1
- ✅ 分页切换

---

## 📡 API接口说明

### 1. 获取陶瓷文化内容列表

**请求：**
```
GET /api/ceramic/list?current=1&size=9&category=history
```

**参数：**
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| current | Integer | 否 | 当前页，默认1 |
| size | Integer | 否 | 每页大小，默认9 |
| category | String | 否 | 分类：all-全部、history-陶瓷历史、craft-制作工艺、master-陶瓷名家、culture-文化传承 |

**响应：**
```json
{
  "code": 200,
  "message": "操作成功",
  "data": {
    "records": [
      {
        "id": 1,
        "category": "history",
        "title": "景德镇陶瓷的千年历史",
        "summary": "景德镇陶瓷历史悠久...",
        "content": "<h3>起源与发展</h3><p>...</p>",
        "coverImage": "https://...",
        "author": "陶瓷研究院",
        "views": 1234,
        "likes": 89,
        "createTime": "2024-01-15T10:00:00"
      }
    ],
    "total": 10,
    "current": 1,
    "size": 9
  }
}
```

### 2. 获取陶瓷文化内容详情

**请求：**
```
GET /api/ceramic/{id}
```

**响应：**
```json
{
  "code": 200,
  "message": "操作成功",
  "data": {
    "id": 1,
    "category": "history",
    "title": "景德镇陶瓷的千年历史",
    "summary": "...",
    "content": "<h3>...</h3>",
    "coverImage": "https://...",
    "author": "陶瓷研究院",
    "views": 1234,
    "createTime": "2024-01-15T10:00:00"
  }
}
```

### 3. 增加浏览量

**请求：**
```
POST /api/ceramic/{id}/view
```

**响应：**
```json
{
  "code": 200,
  "message": "操作成功",
  "data": null
}
```

### 4. 获取分类统计

**请求：**
```
GET /api/ceramic/categories
```

**响应：**
```json
{
  "code": 200,
  "message": "操作成功",
  "data": [
    {
      "key": "all",
      "label": "全部",
      "count": 10
    },
    {
      "key": "history",
      "label": "陶瓷历史",
      "count": 3
    },
    {
      "key": "craft",
      "label": "制作工艺",
      "count": 3
    },
    {
      "key": "master",
      "label": "陶瓷名家",
      "count": 2
    },
    {
      "key": "culture",
      "label": "文化传承",
      "count": 2
    }
  ]
}
```

---

## 🎯 功能特点

1. **完整的CRUD操作**
   - 查询列表（支持分页、分类筛选）
   - 查询详情
   - 浏览量统计

2. **数据安全**
   - 只展示已上架的内容（status=1）
   - 逻辑删除支持

3. **性能优化**
   - 分页查询，避免一次性加载大量数据
   - 索引优化（category、status字段有索引）

4. **用户体验**
   - 自动统计浏览量
   - 美观的卡片式布局
   - 响应式设计
   - 详情弹窗展示

---

## 🔧 常见问题

### 1. 数据库连接失败
**问题：** 后端启动报数据库连接错误

**解决：** 检查`application.yml`中的数据库配置
```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/jingdezhen_tourism?...
    username: root
    password: 你的密码
```

### 2. 接口返回404
**问题：** 前端调用API返回404

**解决：** 
- 确认后端服务已启动
- 检查后端端口是否为8080
- 确认context-path是否为`/api`

### 3. 数据不显示
**问题：** 前端页面显示"暂无数据"

**解决：**
- 确认测试数据已导入
- 检查浏览器控制台是否有错误
- 确认API接口返回正常（可用Postman测试）

### 4. 跨域问题
**问题：** 浏览器控制台报CORS错误

**解决：** 后端已配置CORS，检查`CorsConfig.java`：
```java
.allowedOriginPatterns("*")
.allowedMethods("*")
```

---

## 📈 后续扩展

可以在此基础上添加：

1. **管理端功能**
   - 添加陶瓷文化内容
   - 编辑内容
   - 删除内容
   - 上下架管理

2. **互动功能**
   - 点赞功能
   - 评论功能
   - 收藏功能
   - 分享功能

3. **搜索功能**
   - 关键词搜索
   - 全文检索（ElasticSearch）

4. **推荐功能**
   - 相关内容推荐
   - 热门内容推荐

---

## ✨ 总结

陶瓷文化模块现已完整实现，包括：
- ✅ 完整的后端API
- ✅ 前端页面改造
- ✅ 测试数据准备
- ✅ 浏览量统计
- ✅ 分类筛选
- ✅ 分页功能

可以直接部署使用！


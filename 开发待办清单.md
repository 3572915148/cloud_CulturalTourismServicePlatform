# 景德镇文旅服务平台 - 开发待办清单

根据开发文档整理，按优先级排序

---

## ✅ 优先级1：完善评价功能（用户端）【已完成】

### 📋 需求分析（开发文档 2.6）
> 评价： 用户在订单完成后可以对购买的产品进行评分和文字评价。后端提供提交评价和查询评价列表的API。

### ✅ 已完成
- ✅ 后端ReviewController完整
- ✅ 后端ReviewService完整
- ✅ 数据库表设计完整
- ✅ **产品详情页显示评价**
  - ✅ ProductDetail.vue的"用户评价"tab展示真实评价
  - ✅ 显示评分、内容、用户信息、时间、评价图片
  - ✅ 显示商户回复
  - ✅ 支持分页加载
- ✅ **订单完成后评价功能**
  - ✅ User.vue的"我的订单"中，订单完成后显示"去评价"按钮
  - ✅ 评价提交对话框
  - ✅ 支持评分（1-5星）和文字评价
  - ✅ 支持上传多张图片
  - ✅ 支持同一订单多次评价
- ✅ **我的评价列表**
  - ✅ User.vue的"我的评价"tab显示用户发表的所有评价
  - ✅ 支持查看评价详情
  - ✅ 支持删除评价

### 📊 实际用时
- 前端开发：已完成
- 后端调整：已完成
- 测试：已完成

---

## ✅ 优先级2：商户注册与入驻（商户端）【已完成】

### 📋 需求分析（开发文档 3.1）
> 流程与用户注册类似，但需要提交更多资质信息。后端需要增加一个审核状态字段。审核通过后，商户才能正式入驻。

### ✅ 已完成
- ✅ 数据库merchant表已设计（包含审核状态字段）
- ✅ Merchant实体类已存在
- ✅ **后端功能**
  - ✅ MerchantController.java - 商户控制器
    - ✅ POST /merchant/register - 商户注册
    - ✅ POST /merchant/login - 商户登录
    - ✅ GET /merchant/profile - 获取商户信息
    - ✅ PUT /merchant/profile - 更新商户信息
  - ✅ MerchantService.java - 商户服务
  - ✅ MerchantServiceImpl.java - 服务实现
  - ✅ MerchantMapper.java - 数据访问层
  - ✅ JWT认证支持
- ✅ **前端功能**
  - ✅ 商户端路由配置
  - ✅ MerchantLogin.vue - 商户登录页
  - ✅ MerchantRegister.vue - 商户注册页（包含资质信息表单）
  - ✅ MerchantLayout.vue - 商户端布局
  - ✅ Dashboard.vue - 商户工作台

### 📊 实际用时
- 后端开发：已完成
- 前端开发：已完成
- 测试：已完成

---

## ✅ 优先级3：店铺管理（商户端）【已完成】

### 📋 需求分析（开发文档 3.2）
> 商户登录后，可以编辑自己的店铺信息（名称、Logo、介绍、联系方式、地址等）。后端提供对应的API，确保商户只能修改自己的店铺信息。

### ✅ 已完成
- ✅ **后端功能**
  - ✅ MerchantController中的profile相关接口
  - ✅ 商户权限验证（只能修改自己的店铺信息）
- ✅ **前端功能**
  - ✅ ShopInfo.vue - 店铺信息管理页面
  - ✅ 显示店铺信息
  - ✅ 编辑店铺名称、Logo、介绍
  - ✅ 编辑联系方式、地址
  - ✅ 上传营业执照等资质

### 📊 实际用时
- 前端开发：已完成
- 测试：已完成

---

## ✅ 优先级4：商户产品管理（商户端）【已完成】

### 📋 需求分析（开发文档 3.3）
> 提供产品的增、删、改、查功能。产品信息包括标题、描述、价格、库存、图片等。

### ✅ 已完成
- ✅ ProductController已有基础CRUD接口
- ✅ **后端功能**
  - ✅ MerchantProductController.java - 商户产品控制器
    - ✅ GET /merchant/products - 商户的产品列表
    - ✅ POST /merchant/product - 创建产品（验证商户权限）
    - ✅ PUT /merchant/product/{id} - 更新产品（只能更新自己的产品）
    - ✅ DELETE /merchant/product/{id} - 删除产品（只能删除自己的产品）
    - ✅ PUT /merchant/product/{id}/status - 上下架管理
  - ✅ ProductCategoryController.java - 产品分类控制器
  - ✅ ProductCategoryService - 产品分类服务
- ✅ **前端功能**
  - ✅ ProductManage.vue - 产品管理页面
  - ✅ 产品列表（表格形式）
  - ✅ 添加产品（表单 + 图片上传）
  - ✅ 编辑产品
  - ✅ 删除产品
  - ✅ 上下架管理
  - ✅ 产品分类选择

### 📊 实际用时
- 后端开发：已完成
- 前端开发：已完成
- 测试：已完成

---

## ✅ 优先级5：评价管理（商户端）【已完成】

### 📋 需求分析（开发文档 3.4）
> 商户可以查看用户对自己产品的评价，并可以做出回复。这是一个简单的查看和回复功能

### ✅ 已完成
- ✅ Review表已有reply_content和reply_time字段
- ✅ **后端功能**
  - ✅ MerchantReviewController.java - 商户评价控制器
    - ✅ GET /merchant/reviews - 商户产品的评价列表
    - ✅ POST /merchant/review/{id}/reply - 回复评价
  - ✅ ReviewService扩展
    - ✅ 获取商户产品的评价列表
    - ✅ 商户回复评价功能
- ✅ **前端功能**
  - ✅ ReviewManage.vue - 评价管理页面
  - ✅ 评价列表（显示产品、用户、评分、内容、图片）
  - ✅ 回复评价（文本框）
  - ✅ 筛选（已回复/未回复）
  - ✅ 分页加载

### 📊 实际用时
- 后端开发：已完成
- 前端开发：已完成
- 测试：已完成

---

## ✅ 新增功能：收藏功能（用户端）【已完成】

### 📋 功能描述
> 用户可以收藏喜欢的产品，方便后续查看。支持收藏/取消收藏的切换。

### ✅ 已完成
- ✅ **数据库设计**
  - ✅ favorite表（包含逻辑删除字段）
  - ✅ 用户-产品唯一索引约束
- ✅ **后端功能**
  - ✅ FavoriteController.java - 收藏控制器
    - ✅ POST /favorite/add - 添加收藏
    - ✅ DELETE /favorite/remove - 取消收藏
    - ✅ POST /favorite/toggle - 智能切换收藏状态
    - ✅ GET /favorite/check - 检查收藏状态
    - ✅ GET /favorite/my - 获取我的收藏列表
    - ✅ GET /favorite/count - 获取收藏数量
  - ✅ FavoriteService - 收藏服务
  - ✅ FavoriteMapper - 数据访问层（支持逻辑删除）
- ✅ **前端功能**
  - ✅ ProductDetail.vue - 产品详情页收藏按钮
  - ✅ User.vue - 我的收藏列表
  - ✅ 收藏状态实时同步
  - ✅ 收藏数量统计

### 📊 实际用时
- 数据库设计：已完成
- 后端开发：已完成
- 前端开发：已完成
- 测试：已完成

---

## ✅ 新增功能：商户订单管理（商户端）【已完成】

### 📋 功能描述
> 商户可以查看和管理用户的订单，包括订单列表、订单详情、订单状态管理。

### ✅ 已完成
- ✅ **后端功能**
  - ✅ MerchantOrderController.java - 商户订单控制器
    - ✅ GET /merchant/orders - 商户订单列表
    - ✅ GET /merchant/order/{id} - 订单详情
    - ✅ PUT /merchant/order/{id}/status - 更新订单状态
  - ✅ MerchantOrderService - 订单服务
- ✅ **前端功能**
  - ✅ OrderManage.vue - 订单管理页面
  - ✅ 订单列表（支持状态筛选）
  - ✅ 订单详情查看
  - ✅ 订单状态更新（确认订单、完成订单）
  - ✅ 分页加载

### 📊 实际用时
- 后端开发：已完成
- 前端开发：已完成
- 测试：已完成

---

## ⚪ 优先级6：AI智能推荐（核心功能）

### 📋 需求分析（开发文档 1）
> 核心功能：AI文旅推荐
> 功能描述：1.接收用户请求 → 2. 查询匹配资源 → 3. 构建提示词 → 4. 调用AI模型 → 5. 解析响应 → 6. 返回结果

**暂时不开发（按用户要求）**

### ❌ 需要开发
- AiRecommendationController
- AiRecommendationService
- DeepSeek API集成
- 前端AI对话界面

### 📊 工作量估算
- 后端开发：2-3天
- 前端开发：1-2天
- 测试：1天

---

## 📈 总体工作量统计

| 优先级 | 功能模块 | 预估工作量 | 实际状态 |
|--------|---------|--------|------|
| ✅ 1 | 评价功能完善 | 3小时 | **已完成** |
| ✅ 2 | 商户注册与入驻 | 8-10小时 | **已完成** |
| ✅ 3 | 店铺管理 | 3小时 | **已完成** |
| ✅ 4 | 商户产品管理 | 7-9小时 | **已完成** |
| ✅ 5 | 评价管理（商户） | 5.5小时 | **已完成** |
| ✅ 新增 | 收藏功能 | 4小时 | **已完成** |
| ✅ 新增 | 商户订单管理 | 3小时 | **已完成** |
| ⚪ 6 | AI智能推荐 | 4-6天 | 暂不开发 |

**已完成功能总计：约33-37小时**

---

## 🎯 开发完成情况

### ✅ 阶段1：用户端功能（已完成）
1. ✅ 陶瓷文化模块
2. ✅ 评价功能完善
3. ✅ 收藏功能

### ✅ 阶段2：商户端基础（已完成）
3. ✅ 商户注册与入驻
4. ✅ 店铺管理

### ✅ 阶段3：商户端核心功能（已完成）
5. ✅ 商户产品管理
6. ✅ 评价管理（商户）
7. ✅ 商户订单管理

### ⚪ 阶段4：核心特色功能（待开发）
8. ⚪ AI智能推荐（暂不开发）

---

## 📞 已实现的设计决策

1. **管理员审核商户**
   - ✅ 已实现管理员审核功能（AdminMerchantAuditController）
   - ✅ 商户状态：待审核、已通过、已拒绝

2. **商户和用户登录系统**
   - ✅ 分开管理，使用独立的认证体系
   - ✅ 商户端和用户端独立的路由和页面

3. **产品管理**
   - ✅ 商户可以自主上下架产品
   - ✅ 支持产品分类管理

4. **评价机制**
   - ✅ 用户评价直接显示，无需审核
   - ✅ 支持同一订单多次评价
   - ✅ 商户可以回复用户评价

---

## ✨ 当前可测试的功能（完整版）

### 用户端功能
1. ✅ 用户注册登录
2. ✅ 个人信息管理
3. ✅ 产品浏览和搜索
4. ✅ 产品详情查看
5. ✅ 在线预订和支付
6. ✅ 订单管理
7. ✅ 订单评价（支持图片、多次评价）
8. ✅ 收藏产品
9. ✅ 我的收藏列表
10. ✅ 陶瓷文化浏览
11. ✅ 意见反馈

### 商户端功能
1. ✅ 商户注册与登录
2. ✅ 店铺信息管理
3. ✅ 产品管理（增删改查、上下架）
4. ✅ 订单管理（查看、状态更新）
5. ✅ 评价管理（查看、回复）
6. ✅ 商户工作台

### 管理员功能
1. ✅ 商户审核（通过/拒绝）

**所有基础功能已完成，项目可以正式运行和测试！**


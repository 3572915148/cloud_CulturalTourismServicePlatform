# 景德镇文旅服务平台 - AI功能使用说明

## 🎯 功能概述

AI智能推荐是景德镇文旅服务平台的核心特色功能，通过集成DeepSeek AI模型，为用户提供个性化的文旅产品推荐服务。

## 🚀 功能特性

### 1. 智能对话推荐
- 用户可以通过自然语言描述需求
- AI理解用户意图，推荐最合适的产品
- 支持多轮对话，持续优化推荐结果

### 2. 个性化推荐
- 基于用户查询内容匹配相关产品
- 考虑价格、位置、评分等因素
- 提供详细的推荐理由

### 3. 推荐历史管理
- 保存用户的推荐历史记录
- 支持查看历史推荐结果
- 用户反馈收集，持续优化推荐质量

### 4. 产品详情跳转
- 推荐结果可直接跳转到产品详情页
- 支持在线预订和购买

## 📱 使用方式

### 用户端使用

#### 1. 访问AI助手
- **方式一**：登录后，在首页点击"AI智能推荐"卡片
- **方式二**：在导航栏点击"AI助手"菜单
- **方式三**：直接访问 `/ai-chat` 页面

#### 2. 开始对话
- 在输入框中描述您的需求
- 例如：
  - "我想找一个适合家庭游玩的景点"
  - "推荐一些价格实惠的酒店"
  - "有什么特色的陶瓷体验活动"
  - "推荐一些当地美食"

#### 3. 查看推荐结果
- AI会分析您的需求
- 推荐3-5个最合适的产品
- 显示推荐理由和产品详情

#### 4. 反馈评价
- 对推荐结果进行评价（有帮助/没帮助）
- 帮助AI持续优化推荐质量

#### 5. 查看历史记录
- 点击"查看历史"按钮
- 浏览之前的推荐记录
- 重新查看推荐结果

## 🔧 技术实现

### 后端架构

#### 1. 核心组件
```
├── AiRecommendation.java          # AI推荐实体类
├── AiRecommendationMapper.java    # 数据访问层
├── AiRecommendationService.java   # 服务接口
├── AiRecommendationServiceImpl.java # 服务实现
├── AiRecommendationController.java # 控制器
└── DTO/VO类                       # 数据传输对象
```

#### 2. 推荐流程
1. **接收用户请求** → 解析查询内容和偏好
2. **查询匹配资源** → 从数据库查找相关产品
3. **构建提示词** → 组织上下文信息
4. **调用AI模型** → 请求DeepSeek API
5. **解析响应** → 提取推荐产品ID
6. **返回结果** → 构建推荐响应

#### 3. API接口
- `POST /api/ai/recommend` - 获取AI推荐
- `GET /api/ai/history` - 获取推荐历史
- `POST /api/ai/feedback` - 提交用户反馈
- `GET /api/ai/stats` - 获取推荐统计

### 前端实现

#### 1. 核心组件
```
├── AiChat.vue                     # AI对话界面
├── ai.js                          # AI相关API
└── 路由配置                        # 页面路由
```

#### 2. 界面特性
- 实时对话界面
- 推荐产品卡片展示
- 历史记录侧边栏
- 用户反馈收集
- 响应式设计

## ⚙️ 配置说明

### 1. DeepSeek API配置

在 `application.yml` 中配置：
```yaml
spring:
  ai:
    deepseek:
      api-key: ${DEEPSEEK_API_KEY:your-deepseek-api-key}
      base-url: https://api.deepseek.com
      model: deepseek-chat
      temperature: 0.7
```

### 2. 环境变量设置
```bash
# 设置DeepSeek API Key
export DEEPSEEK_API_KEY=sk-your-actual-api-key
```

### 3. 数据库表结构
```sql
CREATE TABLE `ai_recommendation` (
  `id` BIGINT PRIMARY KEY AUTO_INCREMENT,
  `user_id` BIGINT COMMENT '用户ID',
  `query` TEXT NOT NULL COMMENT '用户查询内容',
  `context` TEXT COMMENT '上下文信息',
  `response` TEXT COMMENT 'AI响应内容',
  `recommended_products` TEXT COMMENT '推荐的产品ID列表（JSON数组）',
  `feedback` TINYINT COMMENT '用户反馈：1-有帮助，0-没帮助',
  `deleted` TINYINT DEFAULT 0 COMMENT '逻辑删除',
  `create_time` DATETIME DEFAULT CURRENT_TIMESTAMP,
  INDEX idx_user_id (`user_id`)
);
```

## 🎨 界面展示

### 1. AI对话界面
- 聊天式交互界面
- 用户消息和AI回复区分显示
- 推荐产品卡片展示
- 反馈按钮

### 2. 推荐产品卡片
- 产品图片、标题、价格
- 地区信息和地址
- 推荐理由
- 点击跳转产品详情

### 3. 历史记录
- 侧边栏显示历史记录
- 查询内容和时间
- 反馈状态显示
- 点击重新查看

## 📊 功能优势

### 1. 智能化
- 基于AI大模型理解用户需求
- 自然语言交互，降低使用门槛
- 个性化推荐，提高匹配精度

### 2. 便捷性
- 一站式推荐服务
- 实时对话反馈
- 历史记录管理

### 3. 可扩展性
- 模块化设计，易于扩展
- 支持多种AI模型接入
- 推荐算法可优化升级

## 🔍 使用示例

### 示例1：景点推荐
**用户输入**：我想找一个适合家庭游玩的景点，价格不要太贵

**AI回复**：
根据您的需求，我为您推荐以下适合家庭游玩的景点：

推荐产品：[1, 5, 8, 12]

1. **景德镇古窑民俗博览区** - 适合家庭体验陶瓷文化
2. **瑶里古镇** - 古色古香，适合拍照打卡
3. **浮梁古县衙** - 历史文化丰富，门票实惠
4. **三宝国际陶艺村** - 现代艺术与传统结合

### 示例2：酒店推荐
**用户输入**：推荐一些价格实惠的酒店，位置要方便

**AI回复**：
为您推荐以下性价比高的酒店：

推荐产品：[15, 23, 31]

1. **景德镇如家酒店** - 位置便利，价格实惠
2. **汉庭酒店（景德镇店）** - 连锁品牌，服务可靠
3. **景德镇青年旅舍** - 经济实惠，适合背包客

## 🚨 注意事项

### 1. API Key配置
- 确保DeepSeek API Key有效
- 注意API调用频率限制
- 定期检查API余额

### 2. 数据安全
- 用户查询内容会保存到数据库
- 遵循数据隐私保护规范
- 定期清理过期数据

### 3. 性能优化
- 控制推荐产品数量（建议3-5个）
- 优化AI提示词长度
- 缓存常用推荐结果

## 🔄 后续优化

### 1. 功能增强
- 支持图片识别推荐
- 增加语音交互功能
- 多语言支持

### 2. 算法优化
- 基于用户行为的推荐优化
- 协同过滤算法集成
- 实时推荐更新

### 3. 用户体验
- 推荐结果个性化排序
- 智能问题建议
- 推荐理由更详细

---

**AI功能已完全集成到景德镇文旅服务平台中，为用户提供智能化的文旅产品推荐服务！**
